<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Consultar Denúncia</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="firebase-config.js"></script>
</head>
<body>
    <h1>Consultar Resposta</h1>
    <form id="consultaForm">
        <input type="text" id="consultaId" placeholder="ID da denúncia" required><br>
        <input type="text" id="consultaSenha" placeholder="Código de acesso" required><br>
        <button type="submit">Consultar</button>
    </form>
    <div id="resultado"></div>

    <script>
        document.getElementById("consultaForm").addEventListener("submit", function(e) {
            e.preventDefault();
            const id = document.getElementById("consultaId").value.trim();
            const senha = document.getElementById("consultaSenha").value.trim();

            db.collection("denuncias").doc(id).get().then((doc) => {
                if (doc.exists) {
                    const data = doc.data();
                    if (data.senha === senha) {
                        document.getElementById("resultado").innerHTML = `
                            <p><strong>Sua Denúncia:</strong> ${data.texto}</p>
                            <p><strong>Resposta da Comissão:</strong> ${data.resposta || "(Ainda sem resposta)"}</p>
                        `;
                    } else {
                        document.getElementById("resultado").innerHTML = `<p style="color:red;">Senha incorreta</p>`;
                    }
                } else {
                    document.getElementById("resultado").innerHTML = `<p style="color:red;">Denúncia não encontrada</p>`;
                }
            });
        });
    </script>
</body>
</html>
